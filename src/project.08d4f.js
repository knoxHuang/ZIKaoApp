window.__require=function t(e,n,i){function s(c,o){if(!n[c]){if(!e[c]){var a=c.split("/");if(a=a[a.length-1],!e[a]){var h="function"==typeof __require&&__require;if(!o&&h)return h(a,!0);if(r)return r(a,!0);throw new Error("Cannot find module '"+c+"'")}}var u=n[c]={exports:{}};e[c][0].call(u.exports,function(t){return s(e[c][1][t]||t)},u,u.exports,t,e,n,i)}return n[c].exports}for(var r="function"==typeof __require&&__require,c=0;c<i.length;c++)s(i[c]);return s}({Main:[function(t,e,n){"use strict";cc._RF.push(e,"2be9cQW949GdrVsD5XjD7mc","Main");var i=t("SingleMgr");cc.Class({extends:cc.Component,properties:{singleMgr:i,topic:{default:null,type:cc.JsonAsset},title:cc.Label,autoToggle:cc.Toggle,checkToggle:cc.Toggle,goToEditorBox:cc.EditBox,answersPref:cc.Prefab,answersView:cc.ScrollView,_currentIdx:0,currentIdx:{get:function(){return this._currentIdx},set:function(t){this.singleMgr.changeAnswer(this.currentIdx,!1),this._currentIdx=t,this._currentIdx>=this._datas.length?this._currentIdx=this._datas.length-1:t<=0&&(this._currentIdx=0),this.singleMgr.updatePage(this._currentIdx,this.onAutoNext.bind(this)),this.title.string="\u5f53\u524d "+this._currentIdx+" / "+this._totalNum+" \u9898",this._immediately?this._mainCamera.position=cc.v2(this._currentIdx*this.node.width,0):this._mainCamera.runAction(cc.moveTo(.2,this._currentIdx*this.node.width,0))},type:cc.Integer},_answerIcons:[]},_initOptions:function(){this._auto=!1,this._checkAnswer=!0;var t=cc.sys.localStorage.getItem("auto");null!==t&&(this.autoToggle.isChecked="true"===t);var e=cc.sys.localStorage.getItem("check");null!==e&&(this.checkToggle.isChecked="true"===e)},_initData:function(){this._datas=this.topic.json.content,this._totalNum=this._datas.length,this._immediately=!1,this._initAnswers()},_initAnswers:function(t){for(var e=0,n=this._datas.length;e<n;++e){var i=this._datas[e],s=cc.instantiate(this.answersPref);s.__idx=e,s.parent=this.answersView.content,s.getComponentInChildren(cc.Label).string=e+1,this._answerIcons[e]={node:s,answer:i.answer}}},_updateAnswers:function(){for(var t=0;t<this._totalNum;++t){this._answerIcons[t].node.off("click",this.onAnswerViewGoToTopic.bind(this))}for(var e=0;e<this._totalNum;++e){var n=this._answerIcons[e],i=this.singleMgr.getAnswerByIndex(e),s=n.node.getChildByName("Background");n.node.on("click",this.onAnswerViewGoToTopic.bind(this)),i?n.answer===i?s.color=cc.color(0,222,255):s.color=cc.Color.RED:s.color=cc.Color.WHITE}},start:function(){this._mainCamera=cc.find("Canvas/Main Camera"),this._initData(),this._initOptions(),this.singleMgr.init(this._datas,this._answerIcons),this.currentIdx=0},onSetAutoState:function(){this._auto=!this._auto,cc.sys.localStorage.setItem("auto",this._auto)},onSetChackState:function(){this._checkAnswer=!this._checkAnswer,cc.sys.localStorage.setItem("check",this._checkAnswer)},onAutoNext:function(t){!this._checkAnswer||t?(this.singleMgr.changeAnswer(this.currentIdx,!1),this._auto&&this.currentIdx++):this.singleMgr.changeAnswer(this.currentIdx,!0)},onGoToTopic:function(){var t=parseInt(this.goToEditorBox.string||0);this._immediately=!0,this.currentIdx=t,this._immediately=!1},onAnswerViewGoToTopic:function(t){var e=t.target.parent.__idx;this.currentIdx=e,this.answersView.node.active=!1},onChangeAnswer:function(){this.singleMgr.changeAnswer(this.currentIdx)},onComplete:function(){this._updateAnswers(),this._immediately=!0,this.answersView.node.active=!0,this.answersView.node.position=cc.Vec2.ZERO},onHideAnswersView:function(){this._immediately=!1,this.answersView.node.active=!1},previous:function(){this.currentIdx--},next:function(){this.currentIdx++}}),cc._RF.pop()},{SingleMgr:"SingleMgr"}],SingleMgr:[function(t,e,n){"use strict";cc._RF.push(e,"e86d6/2c8BGNZ8u1q1jN/0G","SingleMgr");var i=t("Single");cc.Class({extends:cc.Component,properties:{singlePref:cc.Prefab,_singles:[],_curAnswers:[]},_createPage:function(t){var e=cc.instantiate(this.singlePref);e.position=cc.v2(t*this.node.width,0),e.parent=this.node;var n=e.getComponent(i);n.init(t,this._datas[t],this._onClick.bind(this)),this._singles[t]=n,this._curAnswers[t]="NONE"},init:function(t,e){this._singles=[],this._curAnswers=[],this._datas=t,this._answers=e},updatePage:function(t,e){this._singles[t]?this._singles[t].changeAnswer(!1):(this._createPage(t),this._onAutoNext=e)},getAnswerByIndex:function(t){return this._curAnswers[t]},changeAnswer:function(t,e){var n=this._singles[t];n&&n.changeAnswer(e)},_onClick:function(t){if(t.isChecked){this._curAnswers[t.idx]=t.answer;var e=this._answers[t.idx].answer===t.answer;this._onAutoNext&&this._onAutoNext(e)}else this.changeAnswer(t.idx,!1)}}),cc._RF.pop()},{Single:"Single"}],Single:[function(t,e,n){"use strict";cc._RF.push(e,"5e5ddq6Q7lFwL0TXY9qkfzM","Single"),cc.Class({extends:cc.Component,properties:{answer:cc.Node,content:cc.Label,options:cc.Label,_idx:-1},_setAnswer:function(t){switch(t){case"A":this.answer.y=105;break;case"B":this.answer.y=35;break;case"C":this.answer.y=-35;break;case"D":this.answer.y=-105}},init:function(t,e,n){this._idx=t,this.content.string=e.content,this.options.string=e.options,this._setAnswer(e.answer),this._clickEvent=n},changeAnswer:function(t){this.answer.active=void 0===t?!this.answer.active:t},onClick:function(t,e){var n={idx:this._idx,answer:e,isChecked:t.isChecked};this._clickEvent&&this._clickEvent(n)}}),cc._RF.pop()},{}]},{},["Main","Single","SingleMgr"]);