window.__require=function t(e,n,i){function s(o,r){if(!n[o]){if(!e[o]){var a=o.split("/");if(a=a[a.length-1],!e[a]){var h="function"==typeof __require&&__require;if(!r&&h)return h(a,!0);if(c)return c(a,!0);throw new Error("Cannot find module '"+o+"'")}}var l=n[o]={exports:{}};e[o][0].call(l.exports,function(t){return s(e[o][1][t]||t)},l,l.exports,t,e,n,i)}return n[o].exports}for(var c="function"==typeof __require&&__require,o=0;o<i.length;o++)s(i[o]);return s}({Main:[function(t,e,n){"use strict";cc._RF.push(e,"2be9cQW949GdrVsD5XjD7mc","Main");var i=t("SingleMgr");cc.Class({extends:cc.Component,properties:{singleMgr:i,topic:{default:null,type:cc.JsonAsset},title:cc.Label,autoToggle:cc.Toggle,checkToggle:cc.Toggle,answersPref:cc.Prefab,answersView:cc.ScrollView,btn_Wrongs:cc.Node,label_wrongs:cc.Node,_currentIdx:0,currentIdx:{get:function(){return this._currentIdx},set:function(t){this.singleMgr.changeAnswer(this.currentIdx,!1),this._currentIdx=t,this._currentIdx>=this._datas.length?this._currentIdx=this._datas.length-1:t<=0&&(this._currentIdx=0),this.singleMgr.updatePage(this._currentIdx,this.onAutoNext.bind(this)),this.title.string="\u5f53\u524d "+this._currentIdx+" / "+this._totalNum+" \u9898",this._immediately?this._mainCamera.position=cc.v2(this._currentIdx*this.node.width,0):this._mainCamera.runAction(cc.moveTo(.2,this._currentIdx*this.node.width,0))},type:cc.Integer},_answerIcons:[],_wrongQuestions:""},_initOptions:function(){var t=cc.sys.localStorage.getItem("auto");null!==t&&(this.autoToggle.isChecked="true"===t);var e=cc.sys.localStorage.getItem("check");null!==e&&(this.checkToggle.isChecked="true"===e)},_initData:function(t){if(this._datas=[],t=parseInt(t),this.btn_Wrongs.active=6===t,this.label_wrongs.active=!1,6===t){for(var e=cc.sys.localStorage.getItem("wrongs").split(","),n=0;n<e.length;++n)if(e[n]){var i=parseInt(e[n]),s=this.topic.json.content[i];this._datas.push(s)}this.label_wrongs.active=0===this._datas.length}else{var c=0,o=91;2===t?(c=91,o=191):3===t?(c=191,o=291):4===t?(c=291,o=391):5===t&&(c=391,o=491);for(var r=c;r<o;++r){var a=this.topic.json.content[r];this._datas.push(a)}}this._totalNum=this._datas.length-1,this._immediately=!1,this._initAnswers()},_initAnswers:function(t){this.answersView.content.removeAllChildren();for(var e=0,n=this._datas.length;e<n;++e){var i=this._datas[e],s=cc.instantiate(this.answersPref);s.__idx=e,s.parent=this.answersView.content,s.getComponentInChildren(cc.Label).string=e,this._answerIcons[e]={node:s,answer:i.answer}}},_updateAnswers:function(){for(var t=0;t<this._totalNum;++t){this._answerIcons[t].node.off("click",this.onAnswerViewGoToTopic.bind(this))}for(var e=0;e<this._totalNum;++e){var n=this._answerIcons[e],i=this.singleMgr.getAnswerByIndex(e),s=n.node.getChildByName("Background");n.node.on("click",this.onAnswerViewGoToTopic.bind(this)),i?n.answer===i?s.color=cc.color(0,222,255):s.color=cc.Color.RED:s.color=cc.Color.WHITE}},onBack:function(){this._mainPanel.x=0,this._mainCamera.position=cc.Vec2.ZERO},onSelectData:function(t,e){this._mainPanel.x=1e3,this._initData(e),this._initOptions(),this.singleMgr.init(this,this._datas,this._answerIcons),this.currentIdx=0},start:function(){this._mainPanel=cc.find("Canvas/New Panel"),this._mainPanel.x=0,this._mainCamera=cc.find("Canvas/Main Camera")},onSetAutoState:function(){cc.sys.localStorage.setItem("auto",this.autoToggle.isChecked)},onSetChackState:function(){cc.sys.localStorage.setItem("check",this.checkToggle.isChecked)},onAutoNext:function(t,e){(e||this.addWrongs(t),!this.checkToggle.isChecked||e)?(this.singleMgr.changeAnswer(this.currentIdx,!1),this.autoToggle.isChecked&&this.currentIdx++):this.singleMgr.changeAnswer(this.currentIdx,!0)},onAnswerViewGoToTopic:function(t){var e=t.target.parent.__idx;this.currentIdx=e,this.answersView.node.active=!1},onChangeAnswer:function(){this.singleMgr.changeAnswer(this.currentIdx)},onComplete:function(){this._updateAnswers(),this._immediately=!0,this.answersView.node.active=!0,this.answersView.node.position=cc.Vec2.ZERO},onHideAnswersView:function(){this._immediately=!1,this.answersView.node.active=!1},previous:function(){this.currentIdx--},next:function(){this.currentIdx++},removeWrongs:function(){this._wrongQuestions="",cc.sys.localStorage.setItem("wrongs",this._wrongQuestions)},addWrongs:function(t){-1===this._wrongQuestions.indexOf(t)&&(this._wrongQuestions+=t+",",cc.sys.localStorage.setItem("wrongs",this._wrongQuestions))},onGoToVideo:function(){cc.director.loadScene("video")}}),cc._RF.pop()},{SingleMgr:"SingleMgr"}],SingleMgr:[function(t,e,n){"use strict";cc._RF.push(e,"e86d6/2c8BGNZ8u1q1jN/0G","SingleMgr");var i=t("Single");cc.Class({extends:cc.Component,properties:{singlePref:cc.Prefab,_singles:[],_curAnswers:[]},_createPage:function(t){var e=this._datas[t];if(e){var n=cc.instantiate(this.singlePref);n.position=cc.v2(t*this.node.width,0),n.parent=this.node;var s=n.getComponent(i);s.init(t,e,this._onClick.bind(this)),this._singles[t]=s,this._curAnswers[t]="NONE"}},init:function(t,e,n){this._main=t,this.node.removeAllChildren(),this._singles=[],this._curAnswers=[],this._datas=e,this._answers=n},updatePage:function(t,e){this._singles[t]?this._singles[t].changeAnswer(!1):(this._createPage(t),this._onAutoNext=e)},getAnswerByIndex:function(t){return this._curAnswers[t]},changeAnswer:function(t,e){var n=this._singles[t];n&&n.changeAnswer(e)},_onClick:function(t){if(t.isChecked){this._curAnswers[t.idx]=t.answer;var e=this._answers[t.idx].answer===t.answer;this._onAutoNext&&this._onAutoNext(t.tag,e)}else this.changeAnswer(t.idx,!1)}}),cc._RF.pop()},{Single:"Single"}],Single:[function(t,e,n){"use strict";cc._RF.push(e,"5e5ddq6Q7lFwL0TXY9qkfzM","Single"),cc.Class({extends:cc.Component,properties:{answer:cc.Node,content:cc.Label,options:cc.Label,_idx:-1,_dataTag:-1},_setAnswer:function(t){switch(t){case"A":this.answer.y=105;break;case"B":this.answer.y=35;break;case"C":this.answer.y=-35;break;case"D":this.answer.y=-105}},init:function(t,e,n){this._idx=t,this._dataTag=e.answerNum,this.content.string=e.content,this.options.string=e.options,this._setAnswer(e.answer),this._clickEvent=n},changeAnswer:function(t){this.answer.active=void 0===t?!this.answer.active:t},onClick:function(t,e){var n={idx:this._idx,tag:this._dataTag,answer:e,isChecked:t.isChecked};this._clickEvent&&this._clickEvent(n)}}),cc._RF.pop()},{}],Video:[function(t,e,n){"use strict";cc._RF.push(e,"f56d9MgiohGl5OFC5UW0INg","Video"),cc.macro.ENABLE_TRANSPARENT_CANVAS=!0,cc.Class({extends:cc.Component,properties:{vp:cc.VideoPlayer},onVideoEvent:function(t,e){e!==cc.VideoPlayer.EventType.READY_TO_PLAY&&e!==cc.VideoPlayer.EventType.META_LOADED||this.vp.play()},onPlayVideo:function(t,e){this.vp.remoteURL="http://video.biguokaoshi.com/video/xueqianjiaoyuyuanli/xueqianjiaoyuyuanli0"+e+".mp4"},onGoTo:function(){cc.director.loadScene("main")}}),cc._RF.pop()},{}]},{},["Main","Single","SingleMgr","Video"]);