require=function t(e,i,n){function o(c,r){if(!i[c]){if(!e[c]){var a="function"==typeof require&&require;if(!r&&a)return a(c,!0);if(s)return s(c,!0);var u=new Error("Cannot find module '"+c+"'");throw u.code="MODULE_NOT_FOUND",u}var l=i[c]={exports:{}};e[c][0].call(l.exports,function(t){var i=e[c][1][t];return o(i||t)},l,l.exports,t,e,i,n)}return i[c].exports}for(var s="function"==typeof require&&require,c=0;c<n.length;c++)o(n[c]);return o}({AppManager:[function(t,e,i){"use strict";cc._RF.push(e,"037eawaArFKxr44RU4l1o9s","AppManager");var n=t("ResultPanel");window.SUBJECT_TYPE=cc.Enum({Single:-1,Multi:-1}),cc.Class({extends:cc.Component,properties:{preSubjectItem:cc.Prefab,subjectScrollView:cc.ScrollView,count:cc.Label,totalCount:cc.Label,_index:0,index:{get:function(){return this._index},set:function(t){var e=this._configArr.length-1;if(!(t===this._index||t<0||t>e)){this._index=t,this.count.string=t+1,this.moveTo(t);var i=t+1;i<=e&&this.create(i,this._configArr,this.onSelectOption.bind(this))}},visible:!1},_subjectList:[],resultPanel:n},create:function(t,e,i){var n=e[t];if(-1===app.configList.indexOf(n)){var o=n.answer.split(",").length>1?SUBJECT_TYPE.Multi:SUBJECT_TYPE.Single,s=this._subjectList[t];if(!s){var c=cc.instantiate(this.preSubjectItem);c.parent=this.subjectScrollView.content,s={item:c.getComponent("SubjectItem")},this._subjectList.push(s)}s.type=o,s.item.init(t,n,i),n.result=-1,app.configList.push(n)}},init:function(t,e){t&&(this.title=app.Util.searchComp(this.node,"AppTitle",cc.Label),this.title.string=t),this.count.string=1,this._configArr=e,this.totalCount.string=e.length,app.configList=[];for(var i=0;i<2;++i)this.create(i,e,this.onSelectOption.bind(this))},moveTo:function(t){var e=-320-640*t,i=cc.p(e,375);this.subjectScrollView.scrollToTop(),this.subjectScrollView.content.runAction(cc.moveTo(.1,i));var n=this._subjectList[t];this.subjectScrollView.content.height=n.item.node.height},update:function(){var t=this._subjectList[this.index];t&&(this.subjectScrollView.content.height=t.item.node.height)},onShowAnswer:function(){var t=this._subjectList[this.index];t&&t.item.showAnswerDisplay()},onCheckAnswer:function(){var t=this._subjectList[this.index];t&&t.item.updateAnswerDisplay()},onAssignment:function(){this._subjectList.forEach(function(t){var e=t.item,i=app.configList[e.index];if(i&&t.type===SUBJECT_TYPE.Multi){var n=i.answer.split(","),o=[],s=0;if(e.optionGroupNode.children.forEach(function(t){var e=t.getComponent(cc.Toggle);e.isChecked?o.push(e.node.tag):s++}),s>=5)i.result=-1;else if(n.length!==o.length)i.result=!1;else{var c=!0;o.forEach(function(t){-1===n.indexOf(t)&&(c=!1)}),i.result=c}app.configList[e.index]=i}}),this.resultPanel.show(this)},onLast:function(){this.index--},onNext:function(){this.index++},onBack:function(){this.mainPanel=app.Util.searchNode(this.node.parent,"MainPanel"),this.mainPanel.active=!0,this.index=0,this._subjectList.forEach(function(t){t.item.optionGroup&&t.item.optionGroup.node&&t.item.optionGroup.node.removeComponent(cc.ToggleGroup)})},onSelectOption:function(t){if(this._subjectList[this.index].type===SUBJECT_TYPE.Single){var e=app.configList[t.number];e.result=e.answer===t.option,app.configList[t.number]=e,Settings.auto&&this.onNext()}}}),cc._RF.pop()},{ResultPanel:"ResultPanel"}],Global:[function(t,e,i){"use strict";cc._RF.push(e,"e1b77aZjvpBKJD5Jt3z0oeA","Global");window.app={configList:[],scrollViewPos:null},cc._RF.pop()},{}],Main:[function(t,e,i){"use strict";cc._RF.push(e,"0e514H/rWlBbrJGNJWyxepT","Main"),window.Settings={auto:!1,init:function(){this.auto="true"===cc.sys.localStorage.getItem("auto"),cc.find("Canvas/MainPanel/New Toggle").getComponent(cc.Toggle).isChecked=this.auto,console.log("get auto:"+this.auto)},save:function(){cc.sys.localStorage.setItem("auto",this.auto),console.log("save auto:"+this.auto)}},cc.Class({extends:cc.Component,properties:{preMenuItem:cc.Prefab,menuItemRoot:cc.ScrollView},_loadConfig:function(){var t=this;this._config=[],cc.loader.loadResDir("Data",function(e,i){if(!e)for(var n=0;n<i.length;++n){var o=i[n];t._config[n]=o,t._initControl(n,o.tag,o.type)}})},_initControl:function(t,e,i){var n=cc.instantiate(this.preMenuItem);n.getChildByName("Text").getComponent(cc.Label).string=e+"-"+i,n.tag=t,n.on("click",this.onClick,this),n.parent=this.menuItemRoot.content,9===t&&app.scrollViewPos&&this.menuItemRoot.setContentPosition(app.scrollViewPos)},onClick:function(t){app.scrollViewPos=this.menuItemRoot.getContentPosition();var e=this._config[t.target.tag];this.appMgr=app.Util.searchComp(this.node.parent,"AppPanel","AppManager"),this.appMgr.init(e.tag,e.configArr),this.node.active=!1},onAuto:function(){Settings.auto=!Settings.auto,Settings.save()},onLoad:function(){cc.game.setFrameRate(30),Settings.init(),this._loadConfig()}}),cc._RF.pop()},{}],ResultPanel:[function(t,e,i){"use strict";cc._RF.push(e,"7183dncGQdAHqNVK3+Ehq1u","ResultPanel");var n=new cc.Color(150,150,255);cc.Class({extends:cc.Component,properties:{preResultItem:cc.Prefab,resultRoot:cc.Node,btnBack:cc.Node},onLoad:function(){this.node.on("touchend",function(t){t.stopPropagation()},this),this.btnBack.on("touchend",this.onBack,this)},removeResultAll:function(){this.resultRoot.removeAllChildren()},_createResult:function(){for(var t=0;t<app.configList.length;++t){var e=app.configList[t],i=cc.instantiate(this.preResultItem);app.Util.searchComp(i,"Text",cc.Label).string=t+1,-1!==e.result&&(i.color=e.result?n:cc.Color.RED),i.tag=t,i.on("touchend",this._goToTargetSubject,this),i.parent=this.resultRoot}},_goToTargetSubject:function(t){this._appMgr.index=t.target.tag,this._appMgr.onShowAnswer(),this.hide()},show:function(t){this.removeResultAll(),this._appMgr=t,this._createResult(),this.node.runAction(cc.moveTo(.2,cc.p(0,0)))},hide:function(){var t=cc.moveTo(.2,cc.p(0,-960)),e=cc.callFunc(this._hide,this),i=cc.sequence(t,e);this.node.runAction(i)},_hide:function(){this.resultRoot.removeAllChildren()},onBack:function(){this.hide()}}),cc._RF.pop()},{}],SubjectItem:[function(t,e,i){"use strict";cc._RF.push(e,"e58e2QxH7JGIrIbek6UugCU","SubjectItem");var n=["A","B","C","D","E"];cc.Class({extends:cc.Component,properties:{title:cc.Label,optionGroupNode:cc.Node,answer:cc.Label},init:function(t,e,i){var o=this,s=e.answer,c=s.split(","),r=c.length>1;this.optionGroup=null,r||(this.optionGroup=this.optionGroupNode.addComponent(cc.ToggleGroup),this.optionGroup.enabled=!1),this.index=t,this._onSelectOption=i,this.title.string=e.title;for(var a=this.optionGroupNode.children,u=0;u<a.length;++u){var l=a[u],p=n[u],h=app.Util.searchComp(l,"Text",cc.Label);if(l.active=!0,e[p]){h.string=p+"."+e[p],l.tag=p,l.on("click",this.onClick,this);var g=l.getComponent(cc.Toggle);this.optionGroup&&(this.optionGroup.allowSwitchOff=!0,g.toggleGroup=this.optionGroup,this.optionGroup.addToggle(g)),g.isChecked=!1}else l.active=!1}this.answer.string="",r?c.forEach(function(t){o.answer.string+=t+". "+e[t]+"\n\n"}):this.answer.string=s+". "+e[s],this.answer.node.parent.active=!1},showAnswerDisplay:function(){this.answer.node.parent.active=!0},updateAnswerDisplay:function(){this.answer.node.parent.active=!this.answer.node.parent.active},onClick:function(t){this.optionGroup&&(this.optionGroup.enabled=!0);var e={number:this.index,option:t.target.tag};this._onSelectOption&&this._onSelectOption(e)}}),cc._RF.pop()},{}],Util:[function(t,e,i){"use strict";cc._RF.push(e,"7dad4XCU05Ka6KwCK80IBeF","Util"),window.app.Util={searchComp:function(t,e,i){var n=this.searchNode(t,e);if(!n)return null;var o=n.getComponent(i);return o||null},searchNode:function(t,e,i){var n=void 0;function o(t,e){for(var i=[[t]],n=0;n<i.length;++n)for(var o=i[n],s=0;s<o.length;++s){if((t=o[s]).name===e)return t;i.push(t.children)}return null}n=t;for(var s=1;s<arguments.length&&n;++s)n=o(n,arguments[s]);return n}},cc._RF.pop()},{}]},{},["Global","Util","AppManager","Main","ResultPanel","SubjectItem"]);