require=function e(t,o,n){function c(i,r){if(!o[i]){if(!t[i]){var a="function"==typeof require&&require;if(!r&&a)return a(i,!0);if(s)return s(i,!0);var l=new Error("Cannot find module '"+i+"'");throw l.code="MODULE_NOT_FOUND",l}var u=o[i]={exports:{}};t[i][0].call(u.exports,function(e){var o=t[i][1][e];return c(o?o:e)},u,u.exports,e,t,o,n)}return o[i].exports}for(var s="function"==typeof require&&require,i=0;i<n.length;i++)c(n[i]);return c}({Global:[function(e,t,o){"use strict";cc._RFpush(t,"e1b77aZjvpBKJD5Jt3z0oeA","Global");var n=cc.Enum({MAIN:-1,SUBJECT:-1,RESULT:-1}),c=cc.Enum({DAN_XIANG:0,DUO_XIANG:1,MING_CI_JIE_SHI:2,JI_SUAN:3,JIAN_DA:4,LUN_SHU:5});window.Global={PANEL:n,SUBJECT_TYPE:c,lastPanel:n.MAIN,curSubjectType:0,viewIndx:-1,curChooseAnswer:-1,achievement:[],mainPanel:null,resultPanel:null,subjectPanel:null,_resetData:function(){this.viewIndx=-1,this.curChooseAnswer=-1,this.achievement=[]},goToMainPanel:function(e){this._resetData(),this.lastPanel=e,this.mainPanel.active=!0,this.subjectPanel.active=!1,this.resultPanel.active=!1},goToSubjectPanel:function(e){this.lastPanel=e,this.mainPanel.active=!1,this.subjectPanel.active=!0,this.resultPanel.active=!1},goToResultPanel:function(e){this.lastPanel=e,this.mainPanel.active=!1,this.subjectPanel.active=!1,this.resultPanel.active=!0}},cc._RFpop()},{}],MainMenuPanel:[function(e,t,o){"use strict";cc._RFpush(t,"705b8yOfRpHUYQ6YfyEZ4HN","MainMenuPanel"),cc.Class({"extends":cc.Component,properties:{layout:cc.Node},onLoad:function(){Global.mainPanel=this.node,Global.resultPanel=cc.find("Canvas/ResultPanel"),Global.subjectPanel=cc.find("Canvas/SubjectPanel"),Global.subjectPanel.active=!1,Global.resultPanel.active=!1,this._loadComponent()},_loadComponent:function(){for(var e=cc.Enum.getList(Global.SUBJECT_TYPE),t=this.layout.children,o=0,n=t.length;o<n;++o){var c=t[o];c.tag=e[o].value,c.on("touchend",this.onChooseSubject,this)}},onChooseSubject:function(e){Global.curSubjectType=e.target.tag,Global.goToSubjectPanel(Global.PANEL.MAIN)}}),cc._RFpop()},{}],ResultPanel:[function(e,t,o){"use strict";cc._RFpush(t,"0475eQ+GjxK/ZPEgYyOKztf","ResultPanel"),cc.Class({"extends":cc.Component,properties:{subjectPanel:cc.Node,preResult:cc.Prefab,root:cc.Node,lbl_total:cc.Label,lbl_score:cc.Label,lbl_error:cc.Label},onEnable:function(){this.root.removeAllChildren(),this._createResult()},_createResult:function(){for(var e=Global.achievement.length,t=0,o=0,n=0;n<e;++n){var c=cc.instantiate(this.preResult);c.tag=n;var s=Global.achievement[n],i=c.getComponent("Result");i.init(n+1,s.right),c.on("touchend",this.onGoSubject,this),c.parent=this.root,s.right?t++:o++}this.lbl_total.string="总题："+e,this.lbl_error.string="做错："+o,this.lbl_score.string="得分："+t+" / "+e},onBack:function(){Global.goToMainPanel(Global.PANEL.RESULT)},onGoSubject:function(e){Global.viewIndx=e.target.tag,Global.goToSubjectPanel(Global.PANEL.RESULT)}}),cc._RFpop()},{}],Result:[function(e,t,o){"use strict";cc._RFpush(t,"15ea7vExTtPKYstTsg+3m72","Result"),cc.Class({"extends":cc.Component,properties:{lblText:cc.Label,spAccept:cc.Sprite,spriteFrameArr:{"default":[],type:cc.SpriteFrame}},init:function(e,t){this.lblText.string=e+".",this.spAccept.spriteFrame=this.spriteFrameArr[t?0:1],this.spAccept.node.color=t?cc.Color.GREEN:cc.Color.RED}}),cc._RFpop()},{}],SubjectGroup:[function(e,t,o){"use strict";cc._RFpush(t,"07655VZON1MaoEAtTETWCKd","SubjectGroup");var n=e("SubjectItem"),c=["A","B","C","D"];cc.Class({"extends":cc.Component,properties:{title:cc.Label,itemList:{"default":[],type:n},answerStr:cc.Label,spState:{"default":[],type:cc.SpriteFrame}},updateConfig:function(e,t,o){var n=arguments.length<=3||void 0===arguments[3]||arguments[3],s=[];this.toggle=this.node.getComponent(cc.ToggleGroup),this.toggle.allowSwitchOff=!n,this.title.string=t.title;for(var i=0;i<c.length;++i){var r=c[i],a=this.itemList[i];a.toggle=a.getComponent(cc.Toggle),a.toggle.isChecked=!1,a.node.tag=r,a.setText(r+". "+t[r],r),a.node.on("touchend",o),s[r]=a}var l=t.answer;return this.answer=l,this.answerStr.string=l+". "+t[l],this.answerStr.node.parent.active=!1,s},_getCurItem:function(e){for(var t=0;t<this.itemList.length;++t){var o=this.itemList[t];if(o.node.tag===e)return o}},reset:function(){this.itemList.forEach(function(e){e.hideState(),e.toggle.isChecked=!1})},changedAnswer:function(){var e=!this.answerStr.node.parent.active;e?this.showAnswer():this.hideAnswer()},showAnswer:function(){this.answerStr.node.parent.active=!0;var e=void 0;Global.curChooseAnswer?Global.curChooseAnswer===this.answer?(e=this._getCurItem(Global.curChooseAnswer),e.showState(this.spState[0],!0)):(e=this._getCurItem(Global.curChooseAnswer),e.toggle.isChecked=!1,e.showState(this.spState[1],!1),e=this._getCurItem(this.answer),e.showState(this.spState[0],!0)):(e=this._getCurItem(this.answer),e.showState(this.spState[0],!0))},hideAnswer:function(){this.answerStr.node.parent.active=!1;var e=void 0;Global.curChooseAnswer&&(e=this._getCurItem(Global.curChooseAnswer),e.toggle.isChecked=!0,e.hideState()),e=this._getCurItem(this.answer),e.hideState()}}),cc._RFpop()},{SubjectItem:"SubjectItem"}],SubjectItem:[function(e,t,o){"use strict";cc._RFpush(t,"e58e2QxH7JGIrIbek6UugCU","SubjectItem"),cc.Class({"extends":cc.Component,properties:{text:cc.Label,state:cc.Sprite},setText:function(e){this.text.string=e},showState:function(e,t){this.toggle.isChecked=!1,this.state.node.active=!0,this.state.spriteFrame=e,this.state.node.color=t?cc.Color.GREEN:cc.Color.RED},hideState:function(){this.state.node.active=!1}}),cc._RFpop()},{}],SubjectPanel:[function(e,t,o){"use strict";cc._RFpush(t,"a7f67fcaWRJ+YIKHURNutq1","SubjectPanel");var n=e("SubjectGroup");cc.Class({"extends":cc.Component,properties:{subjectGroup:n,_curIdx:-1,curIdx:{get:function(){return this._curIdx},set:function(e){var t=this.configArr.length;e>=t||e<0||(this._curIdx=e,this._updateDanXiang(this.configArr))},visible:!1}},onEnable:function(){var e=this;Global.curChooseAnswer="",this.subjectGroup.enabled=!1,cc.loader.loadRes("Data/config_"+Global.curSubjectType,function(t,o){e.configArr=o.configArr,Global.viewIndx===-1&&e._updateAchievement(o.configArr),e.curIdx=0})},_updateAchievement:function(e){for(var t=[],o=0;o<e.length;++o)t[o]={chooseAnswer:"",answer:"",right:!1};Global.achievement=t},_updateDanXiang:function(e){var t=void 0,o=void 0;if(Global.viewIndx!==-1){t=Global.viewIndx,o=e[t];var n=this.subjectGroup.updateConfig(t,o,this.onChooseItem.bind(this)),c=Global.achievement[t];n[c.chooseAnswer]&&(n[c.chooseAnswer].toggle.isChecked=!0)}else t=this.curIdx,o=e[t],this.subjectGroup.updateConfig(t,o,this.onChooseItem.bind(this))},onChooseItem:function(e){this.subjectGroup.enabled=!0;var t=e.target.parent.getComponent("SubjectGroup");Global.curChooseAnswer=e.target.tag,Global.achievement[this.curIdx]={chooseAnswer:Global.curChooseAnswer,answer:t.answer,right:Global.curChooseAnswer===t.answer}},onBefore:function(){this.curIdx--,this.subjectGroup.hideAnswer()},onAfter:function(){this.curIdx++,this.subjectGroup.hideAnswer(),this.subjectGroup.reset()},onShowAnswer:function(){this.subjectGroup.changedAnswer()},onBack:function(){Global.lastPanel===Global.PANEL.RESULT?Global.goToResultPanel(Global.PANEL.SUBJECT):Global.goToMainPanel(Global.PANEL.SUBJECT)},onGoResult:function(){Global.goToResultPanel(Global.PANEL.SUBJECT)}}),cc._RFpop()},{SubjectGroup:"SubjectGroup"}],Subject:[function(e,t,o){"use strict";cc._RFpush(t,"6bd02xZ+W5PjIYuXHXEdqnm","Subject");var n=new cc.Color(148,148,148,255);cc.Class({"extends":cc.Component,properties:{spriteFrameArr:{"default":[],type:cc.SpriteFrame},item:cc.Label,checkmark:cc.Sprite,spState:cc.Sprite},onLoad:function(){this.toggle=this.node.getComponent(cc.Toggle)},setText:function(e){this.item.string=e},showAnswer:function(e,t){var o=this.node.tag===t;this.spState.node.active=e!==t&&o,this.spState.node.color=cc.Color.GREEN,this.checkmark.spriteFrame=this.spriteFrameArr[o?1:2],this.checkmark.node.color=o?cc.Color.GREEN:cc.Color.RED},hideAnswer:function(){this.spState.node.active=!1,this.checkmark.spriteFrame=this.spriteFrameArr[0],this.checkmark.node.color=n}}),cc._RFpop()},{}]},{},["SubjectGroup","ResultPanel","Result","Subject","MainMenuPanel","SubjectPanel","Global","SubjectItem"]);